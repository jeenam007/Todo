{% extends 'index.html' %}

{% block welcome_message %}
<!-- You can put a welcome message here or leave empty -->
{% endblock %}

{% block body_block %}
 <style>
        .form-inline-row {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .selected-tasks-box {
            min-height: 38px;
            padding: 0.375rem 0.75rem;
            background-color: #f8f9fa;
            border: 1px solid #ced4da;
            border-radius: 0.375rem;
            flex-grow: 1;
        }
    </style>
<body class="bg-light py-5">
    <div class="container">
        <div class="card shadow-sm">
            <div class="card-body">
                <h4 class="card-title mb-4">Create SubTask</h4>

                <form method="POST">
                    {% csrf_token %}

                    <!-- Task name + selected display row -->
                    <div class="mb-3">
                        <label class="form-label">Task Name(s)</label>
                        <div class="form-inline-row">
                            {{ form.task_name }}
                            <div id="selectedTasks" class="selected-tasks-box text-muted">
                                No task selected.
                            </div>
                        </div>
                    </div>

                     <!-- Subtask -->
                    <div class="mb-3">
                        <label for="id_subtask" class="form-label">Subtask</label>
                        {{ form.subtask }}
                    </div>

                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>

            </div>
        </div>
    </div>

    <script>
        const taskSelect = document.getElementById('id_task_name');
        const selectedTasksDiv = document.getElementById('selectedTasks');

        function updateSelectedTasks() {
            const selectedOptions = Array.from(taskSelect.selectedOptions).map(opt => opt.text);
            selectedTasksDiv.textContent = selectedOptions.length
                ? "Selected Task(s): " + selectedOptions.join(", ")
                : "No task selected.";
        }

        taskSelect.addEventListener('change', updateSelectedTasks);
        updateSelectedTasks(); // initialize on load
    </script>

    <!-- Optional Bootstrap JS (for dropdowns etc., not required here) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
